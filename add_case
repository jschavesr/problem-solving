#!/bin/sh

. "scripts/sh/color.sh"

ConfigFile=config

if [ "$1" = "-h" ] || [ "$1" = "--help" ]; then
  ./scripts/sh/docs/show-add-case-manual.sh
  exit 0
fi

if [ ! -f "$ConfigFile" ]; then
  EchoError "./config file not found"
  exit 1
fi

eval "$(cat $ConfigFile)"

if [ -z "$Problem" ]; then
  EchoError "Problem variable not found in ./config file"
  exit 1
fi

CaseId=0
while [ -f "workspace/$Problem/cases/$CaseId.in" ]; do
  CaseId=$((CaseId+1))
done

EchoInfo "Adding case $CaseId"
code "workspace/$Problem/cases/$CaseId.out"
code "workspace/$Problem/cases/$CaseId.in"
